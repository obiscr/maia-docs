---
title: 依赖管理
description: 配置和管理工作流的 Node.js 依赖包，确保执行环境的一致性和可复现性。
---

import { Aside } from "@astrojs/starlight/components"

依赖管理用于为工作流的步骤安装 Node.js 包，并在运行时提供给 `import` 使用。

## 规则

- **包名**：使用 npm 包名（区分大小写），不允许重复。
- **版本**：支持 npm 的 semver 范围（例如 `^1.2.3`、`~1.2.3`、`>=1 <2`）。

## 生效与缓存

- **创建版本**时，系统会把依赖配置固化并计算 `depsHash`。
- **执行 Run** 时，使用该版本的 `depsHash` 对应的依赖目录；如果已安装过，会直接复用。

## 在步骤中使用

安装完成后，步骤代码可以直接 `import`：

```javascript
import { z } from "zod";

export default {
  async main(env, ctx) {
    const schema = z.object({ name: z.string() });
    const data = schema.parse(ctx.params);
    return { outputs: { name: data.name } };
  },
};
```
