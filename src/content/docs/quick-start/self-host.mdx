---
title: Self-host with Docker
description: Get Maia running on your laptop/server in 10 minutes (App + Runner).
---

import { Aside, LinkCard ,Steps } from "@astrojs/starlight/components"

Docker mode runs two services:

- **App (control plane)**: UI + scheduler/state machine + SQLite + SSE
- **Runner (execution plane)**: isolated execution (starts sandbox containers and streams logs back)

## Quick start

<Steps>
1. Download `docker-compose.release.yml` and `.env.production`

   ```bash
    curl -fsSL -o docker-compose.release.yml https://raw.githubusercontent.com/obiscr/maia/main/docker-compose.release.yml
    curl -fsSL -o .env.production https://raw.githubusercontent.com/obiscr/maia/main/env.example
    ```

2. Edit `.env.production` and set `RUNNER_TOKEN`.

    ```dotenv title=".env.production"
    RUNNER_TOKEN=your-token
    ```

3. Start

    ```bash
    docker compose -f docker-compose.release.yml --env-file .env.production up -d
    ```
</Steps>

## Set up

<LinkCard title="Initial setup" description="Open http://localhost:3690 to run the initial setup wizard." href="http://localhost:3690" />

## Get updates

When you use `docker-compose.release.yml` (pre-built image) to deploy, updates usually involve "pulling new image â†’ rebuilding and restarting":

```bash
docker compose -f docker-compose.release.yml --env-file .env.production pull
docker compose -f docker-compose.release.yml --env-file .env.production up -d --remove-orphans
```

### Database migration

When using pre-built images, database migrations are included in the image. When you pull a new image and restart the container:

1. **New image contains the latest migration files**
2. **Container automatically detects and applies new migrations on startup**
3. **Already applied migrations are skipped**

The entire process requires no manual intervention - Maia automatically handles database version upgrades.

<Aside type="tip" title="Migration safety">
Maia's migrator checks the `_prisma_migrations` table to ensure each migration is only executed once. Even if the container restarts multiple times, completed migrations won't be re-applied.
</Aside>

### Verify migration status

If you need to confirm that migrations were successfully applied, you can view the container logs:

```bash
docker compose -f docker-compose.release.yml --env-file .env.production logs app
```

The logs will show detailed information about migration execution.
